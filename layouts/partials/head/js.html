{{ $codeCopy := resources.Get "js/code-copy.js" }}
{{ $filter := resources.Get "js/filter.js" }}
{{ $search := resources.Get "js/search.js" }}
{{ $main := resources.Get "js/main.js" }}

{{- if eq hugo.Environment "development"}}
  {{ $js := slice $codeCopy $filter $main | resources.Concat "js/bundle.js" | js.Build}}
  <script src="{{ $js.RelPermalink }}"></script>
{{- else }}
  {{- $opts := dict "minify" true }}
  {{ $js := slice $codeCopy $filter $main | resources.Concat "js/bundle.js" | js.Build $opts | fingerprint }}
  <script src="{{ $js.RelPermalink }}" integrity="{{- $js.Data.Integrity }}" crossorigin="anonymous"></script>
{{- end }}

{{ $search.Publish }}
